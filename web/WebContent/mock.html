
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mokaroo</title>
</head>
<body>
    <!-- <table id = 'tbl' border="1"></table> -->
    <script>
    
    let titles = ['id', 'first_name', 'last_name', 'email', 'gender', 'ip_address' ];
    let tr, td, text, chk;//변수선언

    let bdy = document.getElementsByTagName('body');//배열임..!
    let tbl = document.createElement('table');
    tbl.setAttribute('border',1);
    bdy[0].appendChild(tbl);


    let json =  [{
           id:1,
           first_name:"Davide",
           last_name:"Garfoot",
           email:"dgarfoot0@cloudflare.com",
           gender:"Agender",
           ip_address:"241.24.60.57"
        },
        {
           id:2,
           first_name:"Codi",
           last_name:"Bittlestone",
           email:"cbittlestone1@xrea.com",
           gender:"Non-binary",
           ip_address:"174.200.27.131"
        },
        {  id:3,
           first_name:"Blanche",
           last_name:"Snelgar",
           email:"bsnelgar2@stanford.edu",
           gender:"Polygender",
           ip_address:"123.102.209.191"
        },
        {
           id:4,
           first_name:"Isabeau",
           last_name:"Featonby",
           email:"ifeatonby3@booking.com",
           gender:"Agender",
           ip_address:"8.113.135.185"
        }]

    // function createTr(std) {
    //     let tr = document.createElement('tr');
    //     tr.onmouseover = function () {//tr태그에 마우스를올리면 이벤트를 실행
    //             this.style.backgroundColor = 'steelblue';
    //             this.style.color = 'azure';
    //         }
    //         tr.onmouseout = function () {//마우스 이벤트 빠져나옴
    //             this.style.backgroundColor = '';
    //         }
    //     }  
    
            //타이틀
            tr = document.createElement('tr');
            th = document.createElement('th');
            chk = document.createElement('input');//태그만듦
            chk.setAttribute('type','checkbox');
            th.appendChild(chk);
            tr.appendChild(th); 
            for(title of titles) { //배열[]쓸떈 of..! 
                th = document.createElement('th');
                text = document.createTextNode(title); 
                th.appendChild(text);
                tr.appendChild(th); 
            }   
            
 
            //버튼
            btn = document.createElement('input')//input 태그는 value로 값이 들어간다.
                btn.setAttribute('type', 'button');
                btn.setAttribute('value','Select Del');
                td = document.createElement('td');
                td.appendChild(btn);
                tr.appendChild(td);  
                tbl.appendChild(tr);


            //데이터 항목
            for (data of json) { //id, first_name, last_name, email, gender, ip_address
                tr = document.createElement('tr');
                //체크박스
                chk = document.createElement('input');//태그만듦
                chk.setAttribute('type','checkbox');//속성부여
                chk.onchange = selAll;
                td = document.createElement('td');
                td.appendChild(chk);
                tr.appendChild(td);

                for(field in data) {
                    //td항목들
                    td = document.createElement('td');
                    text = document.createTextNode(data[field]);
                    td.appendChild(text);
                    tr.appendChild(td);    
                }
                //버튼
                
                btn = document.createElement('input');
                btn.setAttribute('type', 'button');
                btn.setAttribute('value','Del');
                btn.onclick = delFunc;
                td = document.createElement('td');
                td.appendChild(btn);
                tr.appendChild(td);
                tbl.appendChild(tr);
            }


            //한건 선택 지우기.
            function delFunc() {
                console.log(this.parentNode.parentNode.remove());
            }
            //전체 선택
            function selAll() {
                let tChk = document.querySelector('th>input[type="checkbox]');// 선택자 체크한거만 갖고와!
                let checks = document.querySelectorAll('td>input[type="checkbox]'); // 선택자 다 선택해와
                for (let i=0; i<checks.length; i++) {
                    checks[i].checked = tChk.checked;
                }
            }
            //선택지우기
            function delSelected () {
                let checkedAll = document.querySelectorAll('td>input[type="checkbox]:checked');
                console.log(checkedAll)
                for(let i=0; i<checkedAll.length;i++){
                    checkedAll[i].parentNode.parentNode.remove();
                }
            }
    


        console.log(json);
</script>
</body>
</html>